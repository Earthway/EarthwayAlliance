<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="EarthCare Alliance - Donate to Support Climate Initiatives">
  <title>Donate to EarthCare Alliance</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="Earthway Alliance Logo.png">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f5f5f5;
      padding: 20px;
      text-align: center;
    }
    h1 {
      color: #2e7d32;
    }
    form {
      max-width: 500px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    label {
      display: block;
      margin-bottom: 8px;
      text-align: left;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background: #2e7d32;
      color: white;
      font-weight: bold;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
    }
    button:hover {
      background: #1b5e20;
    }
    .info-section {
      background: white;
      padding: 20px;
      margin: 20px auto;
      max-width: 800px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      text-align: left;
    }
    .info-section h2 {
      color: #2e7d32;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1>Donate to EarthCare Alliance</h1>
  <p>Support our mission to combat climate change and conserve wetlands through your generous donation.</p>

  <form id="donation-form">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" placeholder="Enter your full name" required>

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" placeholder="Enter your email" required>

    <label for="amount">Donation Amount (USD):</label>
    <input type="number" id="amount" name="amount" placeholder="Enter amount in USD" required>

    <label for="payment-method">Select Payment Method:</label>
    <select id="payment-method" name="payment-method" required>
      <option value="mpesa">M-Pesa</option>
      <option value="mastercard">MasterCard</option>
      <option value="paypal">PayPal</option>
      <option value="visa">Visa</option>
    </select>

    <button type="button" onclick="processDonation()">Donate Now</button>
  </form>

  <!-- Additional Information Sections -->
  <div class="info-section">
    <h2>Funding Options</h2>
    <p>Your support can take various forms, including one-time donations, monthly contributions, or corporate sponsorships. Every contribution helps drive impactful climate solutions.</p>
  </div>

  <div class="info-section">
    <h2>Project Breakdown</h2>
    <p>Your funds will be used to support activities such as wetland restoration, community training on sustainable agricultural practices, and the deployment of climate monitoring technologies. Detailed project reports will be shared with donors.</p>
  </div>

  <div class="info-section">
    <h2>Sponsorship Tiers</h2>
    <p>We offer various sponsorship levels with benefits such as recognition on our website, project updates, and personalized engagement opportunities. Contact us for more information.</p>
  </div>

  <div class="info-section">
    <h2>Partnership Opportunities</h2>
    <p>We invite corporations and organizations to partner with us in advancing climate change solutions. Get involved through CSR initiatives and collaborative environmental projects.</p>
  </div>

  <script>
    async function processDonation() {
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const amount = document.getElementById('amount').value;
      const paymentMethod = document.getElementById('payment-method').value;

      if (!name || !email || !amount || !paymentMethod) {
        alert('Please fill in all the fields before proceeding.');
        return;
      }

      const paymentMessage = `Thank you, ${name}, for choosing to support EarthCare Alliance. You will be redirected to a secure payment portal to complete your $${amount} donation using ${paymentMethod}.`;

      alert(paymentMessage);

      // Notify via SMS and Email
      const notificationData = {
        name,
        email,
        amount,
        paymentMethod,
        phone: "+254720576822",
        adminEmail: "kiprutoamos1997@gmail.com"
      };

      try {
        // Update this URL with your backend's live URL after deployment
        await fetch("http://localhost:3000/notify-donation", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(notificationData),
        });
        alert("Donation notification sent successfully.");
      } catch (error) {
        alert("Failed to send notification. Please try again.");
        console.error("Error:", error);
      }
    }
  </script>
</body>
</html>

